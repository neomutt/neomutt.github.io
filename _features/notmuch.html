---
layout: features
title: Notmuch
description: Email search engine
status: stable
branch: feature/notmuch
base: mutt/1.6.2
---
{% raw %}
<div class="sect1">
  <div class="titlepage">
    <div>
      <div>
        <h2 class="title" style="clear: both">
        <a class="offset" id="notmuch"></a>&#160;Notmuch Patch</h2>
      </div>
      <div>
        <h3 class="subtitle">Email search engine</h3>
      </div>
    </div>
  </div>
  <div class="sect2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">
          <a class="offset" id="notmuch-patch"></a>1.&#160;Patch</h3>
        </div>
      </div>
    </div>
    <p>To check if Mutt supports
    <span class="quote">“
    <span class="quote">Notmuch</span>”</span>, look for
    <span class="quote">“
    <span class="quote">+USE_NOTMUCH</span>”</span>in the mutt version. See:
    <a class="xref" href="/manual/optionalfeatures.html#compile-time-features" title="1.1.&#160;Enabling/Disabling Features">Section&#160;1.1, “Enabling/Disabling Features”</a>.</p>
    <div class="itemizedlist">
      <p class="title">
        <strong>Dependencies:</strong>
      </p>
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>mutt-1.6.2</p>
        </li>
        <li class="listitem">
          <p>
            <a class="link" href="/manual/optionalfeatures.html#sidebar" title="26.&#160;Sidebar Patch">sidebar patch</a>
          </p>
        </li>
        <li class="listitem">
          <p>
            <a class="link" href="/manual/optionalfeatures.html#quasi-delete" title="24.&#160;Quasi-Delete Patch">quasi-delete patch</a>
          </p>
        </li>
        <li class="listitem">
          <p>
            <a class="link" href="/manual/optionalfeatures.html#index-color" title="14.&#160;Index Color Patch">index-color patch</a>
          </p>
        </li>
        <li class="listitem">
          <p>Notmuch libraries</p>
        </li>
      </ul>
    </div>
    <p>This patch is part of the
    <a class="ulink" href="http://www.neomutt.org/" target="_top">NeoMutt Project</a>.</p>
  </div>
  <div class="sect2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">
          <a class="offset" id="notmuch-variables"></a>2.&#160;Variables</h3>
        </div>
      </div>
    </div>
    <div class="table">
      <a class="offset" id="table-notmuch-variables"></a>
      <p class="title">
        <strong>Table&#160;6.15.&#160;Notmuch Variables</strong>
      </p>
      <div class="table-contents">
        <table class="table" summary="Notmuch Variables" border="1">
          <colgroup>
            <col />
            <col />
            <col />
          </colgroup>
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Default</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <code class="literal">nm_db_limit</code>
              </td>
              <td>number</td>
              <td>
                <code class="literal">0</code>
              </td>
            </tr>
            <tr>
              <td>
                <code class="literal">nm_default_uri</code>
              </td>
              <td>string</td>
              <td>(empty)</td>
            </tr>
            <tr>
              <td>
                <code class="literal">nm_exclude_tags</code>
              </td>
              <td>string</td>
              <td>(empty)</td>
            </tr>
            <tr>
              <td>
                <code class="literal">nm_hidden_tags</code>
              </td>
              <td>string</td>
              <td>
                <code class="literal">unread,draft,flagged,passed,replied,attachment,signed,encrypted</code>
              </td>
            </tr>
            <tr>
              <td>
                <code class="literal">nm_open_timeout</code>
              </td>
              <td>number</td>
              <td>
                <code class="literal">5</code>
              </td>
            </tr>
            <tr>
              <td>
                <code class="literal">nm_query_type</code>
              </td>
              <td>string</td>
              <td>
                <code class="literal">messages</code>
              </td>
            </tr>
            <tr>
              <td>
                <code class="literal">nm_record</code>
              </td>
              <td>boolean</td>
              <td>
                <code class="literal">no</code>
              </td>
            </tr>
            <tr>
              <td>
                <code class="literal">nm_record_tags</code>
              </td>
              <td>string</td>
              <td>(empty)</td>
            </tr>
            <tr>
              <td>
                <code class="literal">nm_unread_tag</code>
              </td>
              <td>string</td>
              <td>
                <code class="literal">unread</code>
              </td>
            </tr>
            <tr>
              <td>
                <code class="literal">vfolder_format</code>
              </td>
              <td>string</td>
              <td>
                <code class="literal">%6n(%6N) %f</code>
              </td>
            </tr>
            <tr>
              <td>
                <code class="literal">virtual_spoolfile</code>
              </td>
              <td>boolean</td>
              <td>
                <code class="literal">no</code>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <br class="table-break" />
  </div>
  <div class="sect2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">
          <a class="offset" id="notmuch-functions"></a>3.&#160;Functions</h3>
        </div>
      </div>
    </div>
    <div class="table">
      <a class="offset" id="table-notmuch-functions"></a>
      <p class="title">
        <strong>Table&#160;6.16.&#160;Notmuch Functions</strong>
      </p>
      <div class="table-contents">
        <table class="table" summary="Notmuch Functions" border="1">
          <colgroup>
            <col />
            <col />
            <col />
            <col />
          </colgroup>
          <thead>
            <tr>
              <th>Menus</th>
              <th>Default Key</th>
              <th>Function</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>index,pager</td>
              <td>X</td>
              <td>
                <code class="literal">&lt;change-vfolder&gt;</code>
              </td>
              <td>open a different virtual folder</td>
            </tr>
            <tr>
              <td>index,pager</td>
              <td>+</td>
              <td>
                <code class="literal">&lt;entire-thread&gt;</code>
              </td>
              <td>read entire thread of the current message</td>
            </tr>
            <tr>
              <td>index,pager</td>
              <td>`</td>
              <td>
                <code class="literal">&lt;modify-labels&gt;</code>
              </td>
              <td>modify (notmuch) tags</td>
            </tr>
            <tr>
              <td>index,pager</td>
              <td>(none)</td>
              <td>
                <code class="literal">&lt;modify-labels-then-hide&gt;</code>
              </td>
              <td>modify labels and then hide message</td>
            </tr>
            <tr>
              <td>index,pager</td>
              <td>(none)</td>
              <td>
                <code class="literal">&lt;sidebar-toggle-virtual&gt;</code>
              </td>
              <td>toggle between mailboxes and virtual mailboxes</td>
            </tr>
            <tr>
              <td>index,pager</td>
              <td>Alt-X</td>
              <td>
                <code class="literal">&lt;vfolder-from-query&gt;</code>
              </td>
              <td>generate virtual folder from query</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <br class="table-break" />
  </div>
  <div class="sect2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">
          <a class="offset" id="notmuch-commands"></a>4.&#160;Commands</h3>
        </div>
      </div>
    </div>
    <div class="cmdsynopsis">
      <p>
      <code class="command">virtual-mailboxes</code>
      <em class="replaceable">
        <code>description</code>
      </em>
      <em class="replaceable">
        <code>notmuch-URI</code>
      </em>{
      <em class="replaceable">
        <code>description</code>
      </em>
      <em class="replaceable">
        <code>notmuch-URI</code>
      </em>...}
      <br />
      <code class="command">tag-transforms</code>
      <em class="replaceable">
        <code>tag</code>
      </em>
      <em class="replaceable">
        <code>transformed-string</code>
      </em>{
      <em class="replaceable">
        <code>tag</code>
      </em>
      <em class="replaceable">
        <code>transformed-string</code>
      </em>...}
      <br />
      <code class="command">tag-formats</code>
      <em class="replaceable">
        <code>tag</code>
      </em>
      <em class="replaceable">
        <code>format-string</code>
      </em>{
      <em class="replaceable">
        <code>tag</code>
      </em>
      <em class="replaceable">
        <code>format-string</code>
      </em>...}</p>
    </div>
  </div>
  <div class="sect2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">
          <a class="offset" id="notmuch-colors"></a>5.&#160;Colors</h3>
        </div>
      </div>
    </div>
    <p>Adds these to index-color patch:</p>
    <div class="table">
      <a class="offset" id="table-notmuch-colors"></a>
      <p class="title">
        <strong>Table&#160;6.17.&#160;Index Colors</strong>
      </p>
      <div class="table-contents">
        <table class="table" summary="Index Colors" border="1">
          <colgroup>
            <col />
            <col />
            <col />
          </colgroup>
          <thead>
            <tr>
              <th>Object</th>
              <th>Pattern</th>
              <th>Highlights</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <code class="literal">index_tag</code>
              </td>
              <td>yes</td>
              <td>an individual message tag, %G, uses tag name</td>
            </tr>
            <tr>
              <td>
                <code class="literal">index_tags</code>
              </td>
              <td>no</td>
              <td>the transformed message tags, %g</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <br class="table-break" />
  </div>
  <div class="sect2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">
          <a class="offset" id="notmuch-muttrc"></a>6.&#160;Muttrc</h3>
        </div>
      </div>
    </div>
    <pre class="screen">
<span class="comment"># This is a complete list of notmuch-related configuration.
 
# --------------------------------------------------------------------------
# VARIABLES - shown with their default values
# --------------------------------------------------------------------------
 
# This variable specifies notmuch query limit.</span>
set nm_db_limit = 0
 
<span class="comment"># This variable specifies the default Notmuch database in format:
# notmuch://&lt;absolute path&gt;</span>
set nm_default_uri = ""
 
<span class="comment"># The messages tagged with these tags are excluded and not loaded
# from notmuch DB to mutt unless specified explicitly.</span>
set nm_exclude_tags = ""
 
<span class="comment"># This variable specifies private notmuch tags which should not be printed
# on screen (index, pager).</span>
set nm_hidden_tags = "unread,draft,flagged,passed,replied,attachment,signed,encrypted"
 
<span class="comment"># This option specifies timeout for Notmuch database. Default is 5 seconds.</span>
set nm_open_timeout = 5
 
<span class="comment"># This variable specifies notmuch query type, supported types: 'threads' and</span>
# 'messages'.
set nm_query_type = messages
 
<span class="comment"># Add messages stored to the mutt record (see $record in the mutt docs)
# also to notmuch DB.</span>
set nm_record = no
 
<span class="comment"># Tags that should be removed or added to the to the messages stored in the mutt record.</span>
set nm_record_tags = ""
 
<span class="comment"># This variable specifies notmuch tag which is used for unread messages.</span>
set nm_unread_tag = unread
 
<span class="comment"># This variable allows you to customize the file browser display for virtual
# folders to your personal taste.</span>
set vfolder_format = "%6n(%6N) %f"
 
<span class="comment"># When set, mutt will use the first virtual mailbox (see virtual-mailboxes)
# as a spoolfile.</span>
set virtual_spoolfile = no
 
<span class="comment"># --------------------------------------------------------------------------
# FUNCTIONS - shown with an example mapping
# --------------------------------------------------------------------------
 
# open a different virtual folder</span>
bind index,pager X change-vfolder
 
<span class="comment"># read entire thread of the current message</span>
bind index,pager + entire-thread
 
<span class="comment"># modify (notmuch) tags</span>
bind index,pager ` modify-labels
 
<span class="comment"># generate virtual folder from query</span>
bind index,pager \eX vfolder-from-query
 
<span class="comment"># modify labels and then hide message
# bind index,pager ??? modify-labels-then-hide
 
# toggle between mailboxes and virtual mailboxes
# bind index,pager ??? sidebar-toggle-virtual
 
# --------------------------------------------------------------------------
# COMMANDS - shown with an example
# --------------------------------------------------------------------------
 
# virtual-mailboxes description notmuch-URI { description notmuch-URI ...}
# virtual-mailboxes "Climbing" "notmuch://?query=climbing"
 
# Replace some tags with icons
# tag-transforms tag transformed-string { tag transformed-string ...}
# tag-transforms "inbox"   "i"   \
#                "unread"  "u"   \
#                "replied" "↻ "  \
#                "sent"    "➥ "  \
#                "todo"    "T"   \
#                "deleted" "DEL" \
#                "invites" "CAL"
 
# See README.notmuch for an explanation
# tag-formats tag format-string { tag format-string ...}
# tag-formats "inbox"   "GI" \
#              "unread"  "GU" \
#              "replied" "GR" \
#              "sent"    "GS" \
#              "todo"    "Gt" \
#              "deleted" "GD" \
#              "invites" "Gi"
 
# set index_format='4C %S %[%y.%m.%d] %-18.18n %?GU?%GU&amp; ? %?GR?%GR&amp; ? %?GI?%GI&amp; ? %s'
 
# --------------------------------------------------------------------------
# COLORS - some unpleasant examples are given
# --------------------------------------------------------------------------
 
# These symbols are added to the index-color patch:
 
# an individual message tag, %G, uses tag name
# this symbol uses a pattern</span>
color index_tag red white "inbox"
 
<span class="comment"># the transformed message tags, %g
# this symbol does not use a pattern</span>
color index_tags green default
 
<span class="comment"># --------------------------------------------------------------------------
 
# vim: syntax=muttrc</span>
</pre>
  </div>
  <div class="sect2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">
          <a class="offset" id="notmuch-see-also"></a>7.&#160;See Also</h3>
        </div>
      </div>
    </div>
    <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>
            <a class="ulink" href="http://www.neomutt.org/" target="_top">NeoMutt Project</a>
          </p>
        </li>
        <li class="listitem">
          <p>
            <a class="link" href="/manual/optionalfeatures.html#compile-time-features" title="1.1.&#160;Enabling/Disabling Features">Compile-Time Features</a>
          </p>
        </li>
      </ul>
    </div>
  </div>
  <div class="sect2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">
          <a class="offset" id="notmuch-known-bugs"></a>8.&#160;Known Bugs</h3>
        </div>
      </div>
    </div>
    <p>None</p>
  </div>
  <div class="sect2">
    <div class="titlepage">
      <div>
        <div>
          <h3 class="title">
          <a class="offset" id="notmuch-credits"></a>9.&#160;Credits</h3>
        </div>
      </div>
    </div>
    <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
        <li class="listitem">
          <p>Karel Zak
          <code class="email">&lt;
          <a class="email" href="mailto:kzak@redhat.com">kzak@redhat.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Chris Mason
          <code class="email">&lt;
          <a class="email" href="mailto:clm@fb.com">clm@fb.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Christoph Rissner
          <code class="email">&lt;
          <a class="email" href="mailto:cri@visotech.at">cri@visotech.at</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>David Riebenbauer
          <code class="email">&lt;
          <a class="email" href="mailto:davrieb@liegesta.at">davrieb@liegesta.at</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>David Sterba
          <code class="email">&lt;
          <a class="email" href="mailto:dsterba@suse.cz">dsterba@suse.cz</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>David Wilson
          <code class="email">&lt;
          <a class="email" href="mailto:dw@botanicus.net">dw@botanicus.net</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Don Zickus
          <code class="email">&lt;
          <a class="email" href="mailto:dzickus@redhat.com">dzickus@redhat.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Eric Davis
          <code class="email">&lt;
          <a class="email" href="mailto:edavis@insanum.com">edavis@insanum.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Jan Synacek
          <code class="email">&lt;
          <a class="email" href="mailto:jsynacek@redhat.com">jsynacek@redhat.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Jeremiah C. Foster
          <code class="email">&lt;
          <a class="email" href="mailto:jeremiah@jeremiahfoster.com">jeremiah@jeremiahfoster.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Josh Poimboeuf
          <code class="email">&lt;
          <a class="email" href="mailto:jpoimboe@redhat.com">jpoimboe@redhat.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Kirill A. Shutemov
          <code class="email">&lt;
          <a class="email" href="mailto:kirill@shutemov.name">kirill@shutemov.name</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Luke Macken
          <code class="email">&lt;
          <a class="email" href="mailto:lmacken@redhat.com">lmacken@redhat.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Mantas Mikulėnas
          <code class="email">&lt;
          <a class="email" href="mailto:grawity@gmail.com">grawity@gmail.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Patrick Brisbin
          <code class="email">&lt;
          <a class="email" href="mailto:pbrisbin@gmail.com">pbrisbin@gmail.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Philippe Le Brouster
          <code class="email">&lt;
          <a class="email" href="mailto:plb@nebkha.net">plb@nebkha.net</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Raghavendra D Prabhu
          <code class="email">&lt;
          <a class="email" href="mailto:rprabhu@wnohang.net">rprabhu@wnohang.net</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Sami Farin
          <code class="email">&lt;
          <a class="email" href="mailto:hvtaifwkbgefbaei@gmail.com">hvtaifwkbgefbaei@gmail.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Stefan Assmann
          <code class="email">&lt;
          <a class="email" href="mailto:sassmann@kpanic.de">sassmann@kpanic.de</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Stefan Kuhn
          <code class="email">&lt;
          <a class="email" href="mailto:p_regius@gmx.ch">p_regius@gmx.ch</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Tim Stoakes
          <code class="email">&lt;
          <a class="email" href="mailto:tim@stoakes.net">tim@stoakes.net</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Vladimir Marek
          <code class="email">&lt;
          <a class="email" href="mailto:Vladimir.Marek@oracle.com">Vladimir.Marek@oracle.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Víctor Manuel Jáquez Leal
          <code class="email">&lt;
          <a class="email" href="mailto:vjaquez@igalia.com">vjaquez@igalia.com</a>&gt;</code></p>
        </li>
        <li class="listitem">
          <p>Richard Russon
          <code class="email">&lt;
          <a class="email" href="mailto:rich@flatcap.org">rich@flatcap.org</a>&gt;</code></p>
        </li>
      </ul>
    </div>
  </div>
</div>
{% endraw %}
